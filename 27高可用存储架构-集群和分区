=============高可用存储架构-集群和分区=================

除了双机架构，另外两种常用的高可用存储架构——集群和分区

数据集群
    主备、主从、主主架构本质上都有一个隐含的假设：主机能够存储所有数据，但主机本身的存储和处理能力是有极限的。
    目前一台多核服务器，约为几个TB。

    使用多台服务器来存储数据，就是数据集群架构。多台机器组合在一起形成一个统一的系统。这里的多台，数量上至少是
    3台。
    根据集群中机器承担的不同角色来划分，集群可以分类两类：
        1数据集中集群
            复杂度在于：主机如何将数据复制给备机、备机如何检测主机状态、主机故障后，如何决定新的主机
            目前开源的数据集中集群以Zookeeper为典型，通过ZAB算法来解决上述提到的几个问题。
        2数据分散集群
            多个服务器组成一个集群，每台服务器都会负责存储一部分数据；同时，为了提升硬件利用率，每台服务器又会备份一部分数据。
            复杂度在于：如何将数据分配到不同的服务器上，考虑均衡性、容错性、可伸缩性、必须有一个角色来负责执行数据分配算法。
            Hadoop的实现就是独立的服务器负责数据分区的分配，这台服务器叫做Namenode
            Elasticsearch集群是通过选举一台服务器来做数据分区的分配，叫做 master node
        数据集中集群架构中，客户端只能将数据写到主机；数据分散集群架构中，客户端可以向任意服务器中读写数据。
        适用场景：数据集中集群适合数据量不大、集群机器不多的场景，例如ZK集群，一般推荐5台左右，数据量是单台服务器就能支撑；
                  数据分散集群适合业务数据量巨大、集群机器数量庞大的业务场景——Hadoop集群、HBase集群等

数据分区
    双机架构、数据集群等都是基于硬件故障的场景去考虑和设计的。
    基于地理级别的故障来设计高可用架构，是数据分区架构产生的背景。

    数据分区指将数据按照一定的规则进行分区，不同分区分布在不同的地理位置，每个分区存储一部分数据，从而规避地理级别的故障所造成
    的巨大影响。
    考虑点：
        数据量——数据量越大，分区规则会越复杂，考虑的情况也就越多。
        分区规则——综合业务范围、成本等因素，洲际分区、国家分区、城市分区等等
        复制规则——常见的有3种：集中式（设计简单、互不影响、扩展容易、成本高）、互备式（设计复杂、扩展麻烦、成本低）、独立式（设计简单、互不影响、扩展容易、成本高）


