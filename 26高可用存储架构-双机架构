=======高可用存储架构-双机架构===========

存储高可用方案的本质都是通过将数据复制到多个存储系统，通过数据冗余的方式来实现高可用。
其复杂性主要在于如何应对复制延迟和中断导致的数据不一致问题。

    任何一个高可用存储方案，需要思考和分析的方面：
    
1--数据如何复制
2--各个节点的职责是什么
3--如何应对复制延迟
4--如何应对复制中断

常见高可用存储架构有主备、主从、主主、集群、分区等

常见的双机高可用架构：主备、主从、主备/主从切换、主主

    1 主备复制
        最常见、最简单的一种存储高可用方案。主机读写、备机仅做备份。备机改为主机，需要人工操作。
        架构简单，易于实现；备机仅为备份，硬件成本有浪费，故障后需要人工参与。

        应用：内部的后台管理系统使用较多，如 学生管理系统、员工管理系统、假期管理系统等，因为这类系统
        的数据变更频率低，即使在某些场景下丢数据，也可以通过人工的方式补全。

    2 主从复制
        主机负责读写，从机只负责读，不负责写。
        主机故障时，读操作相关业务可以继续运行；从机提供读操作，发挥了硬件性能。
        主从复制架构中，客户端需要感知主从关系，并将不同的操作发给不同的机器进行处理，复杂度比主备复制高。
        如果主从复制延迟比较大，业务会因为数据不一致出现问题。
        故障时，需要人工干预。

        应用：读多写少的业务，例如 论坛、BBS、新闻网站这类业务，读操作数量是写操作数量的10倍甚至100倍以上。                   

    3 双机切换
        主备切换、主从切换
            切换方案设计——主备间状态判断（状态传递渠道、状态检测的内容） 切换决策——切换时机、切换策略、自动程度 
            数据冲突解决
        常见架构有三种形式——互连式、中介式、模拟式
   4 主主复制
    两台都是主机，没有切换概念
    采用主主复制架构，必须保证数据能够双向复制，而很多数据是不能双向复制的——按照数字增长的表ID、库存信息、余额数据等等。
    主主复制架构对数据的设计有严格的要求。一般适合于那些临时性、可丢失、可覆盖的数据场景。
    如 用户登录的session数据、用户行为的日志数据、论坛的草稿数据等等。                    
